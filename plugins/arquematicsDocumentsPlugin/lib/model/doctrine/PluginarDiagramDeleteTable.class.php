<?php

/**
 * PluginarDiagramDeleteTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class PluginarDiagramDeleteTable extends Doctrine_Table
{
    /**
     * Returns an instance of this class.
     *
     * @return object PluginarDiagramDeleteTable
     */
    public static function getInstance()
    {
        return Doctrine_Core::getTable('PluginarDiagramDelete');
    }
    
    /**
    * devuelve un registro 
    * 
    * @param <$documentId>
    * @param <$userId>
    * @return <arLavernaDocDelete>
    */
  public function hasUserAndDoc($userId, $documentId,  $conn = false)
  {
    $q = Doctrine_Core::getTable('arDiagramDelete')
            ->createQuery('d')
            ->where('d.diagram_id = ?', $documentId)
            ->andWhere('d.user_id = ?', $userId)
            ->select('count(d.id)');
    
    if ($conn)
    {
        $q->setConnection($conn);  
    }
    
    //echo $q->getSqlQuery();
    return ($q->execute(array(), Doctrine_Core::HYDRATE_SINGLE_SCALAR) > 0);
  }
    
}